# Setting up LinuxVMCreator in Xcode

## Quick Start

An Xcode project (`LinuxVMCreator.xcodeproj`) is already configured and ready to open.

```bash
open LinuxVMCreator.xcodeproj
```

Then build and run with **⌘R**.

## Project Structure

The Xcode project compiles the following **root-level** source files:

| File | Role |
|---|---|
| `LinuxVMCreatorApp.swift` | App entry point |
| `ContentView.swift` | Main window and VM list UI |
| `VMManagerViewModel.swift` | VM state and lifecycle management |
| `VirtualMachine.swift` | VM model |
| `VirtualizationService.swift` | Apple Virtualization framework integration |
| `VMDetailView.swift` | VM detail panel UI |
| `VMNetworkDetector.swift` | Network detection for running VMs |

Additional project files:
- `LinuxVMCreator.entitlements` — code signing entitlements
- `SHARED_FOLDERS_GUIDE.md` — bundled as an app resource
- `Info.plist` is auto-generated by Xcode (`GENERATE_INFOPLIST_FILE = YES`)

> **Note:** The `src/` directory and `Package.swift` are for Swift Package Manager and are **not used** by the Xcode build.

## Signing

The project is configured for automatic signing with team `BE73D4V6Q7` (`com.startergo.LinuxVMCreator`). To build on a different machine:

1. Select the project in the navigator
2. Go to **Signing & Capabilities**
3. Change the **Team** to your own Apple developer team

## Required Capabilities

The following are already configured in `LinuxVMCreator.entitlements` and the Xcode build settings:

- **App Sandbox** with outgoing network connections
- **Hardened Runtime** with:
  - Allow JIT-compiled code
  - Allow unsigned executable memory
  - Allow DYLD environment variables
  - Disable library validation (required for VMs)

## Troubleshooting

### "App is damaged" or signing error
Ensure your team is selected under **Signing & Capabilities** and that you have a valid development certificate in Keychain.

### Virtualization errors at runtime
- Confirm **App Sandbox** is enabled
- Confirm **Hardened Runtime** has the VM-related exceptions listed above
- macOS 14 (Sonoma) or later is required

### No window appears
- Check **Console.app** for crash logs from `LinuxVMCreator`
- Verify entitlements are correctly applied under **Signing & Capabilities**
